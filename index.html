<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Factory Studio - Tienda Completa</title>
    <style>
        /* 1. VARIABLES DE COLOR (DIN√ÅMICAS) */
        :root {
            --bg-body: #f4f4f9;
            --bg-card: #ffffff;
            --text-main: #2c3e50;
            --text-muted: #666666;
            --accent: #3498db;
            --header-bg: #2c3e50;
            --sidebar-bg: #ffffff;
            --tag-bg: #ebf5fb;
            --input-bg: #ffffff;
        }

        [data-theme="dark"] {
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --text-main: #e0e0e0;
            --text-muted: #b0b0b0;
            --accent: #3498db;
            --header-bg: #000000;
            --sidebar-bg: #1e1e1e;
            --tag-bg: #2c3e50;
            --input-bg: #2d2d2d;
        }

        /* 2. LAYOUT GENERAL */
        body { 
            margin: 0; 
            font-family: 'Segoe UI', sans-serif; 
            background-color: var(--bg-body); 
            color: var(--text-main);
            transition: 0.3s;
        }

        header { background: var(--header-bg); color: white; padding: 1.5rem; text-align: center; }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }

        .catalog-area { flex: 3; min-width: 300px; }

        /* 3. CAT√ÅLOGO DE PRODUCTOS */
        .catalog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .product-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
            border: 1px solid rgba(128,128,128,0.1);
        }

        .image-placeholder { height: 180px; background: #e0e0e0; display: flex; align-items: center; justify-content: center; color: #888; }
        
        /* 4. GALER√çA DE TRABAJOS */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .gallery-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            background: var(--bg-card);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            height: 350px;
        }

        .gallery-img-placeholder { width: 100%; height: 100%; background: #444; display: flex; align-items: center; justify-content: center; color: white; }

        .gallery-info {
            padding: 15px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            position: absolute;
            bottom: 0;
            width: 100%;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            box-sizing: border-box;
        }

        .gallery-item:hover .gallery-info { transform: translateY(0); }

        /* 5. FORMULARIO PERSONALIZADO */
        .custom-order-box {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-top: 40px;
        }

        .form-group { margin-bottom: 15px; }
        .form-row { display: flex; gap: 15px; flex-wrap: wrap; }
        .form-row .form-group { flex: 1; min-width: 140px; }
        
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9rem; }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: var(--input-bg);
            color: var(--text-main);
            box-sizing: border-box;
        }

        .btn-send-custom {
            background: var(--accent);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        /* 6. SIDEBAR */
        .sidebar {
            flex: 1;
            min-width: 280px;
            background: var(--sidebar-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            height: fit-content;
        }

        .sidebar h3 { border-bottom: 2px solid var(--accent); padding-bottom: 8px; margin-top: 25px; }
        .sidebar ul { list-style: none; padding: 0; }
        .sidebar li { margin: 10px 0; }
        .sidebar a { text-decoration: none; color: var(--text-main); font-weight: 500; }

        .category-tag { background: var(--tag-bg); color: var(--accent); padding: 2px 8px; border-radius: 20px; font-size: 0.7rem; }

        /* 7. BOTONES FLOTANTES Y VISOR */
        .theme-switch { position: fixed; bottom: 20px; left: 20px; background: var(--accent); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; font-size: 1.5rem; z-index: 1000; }

        #viewer-container { width: 100%; height: 200px; background: rgba(128,128,128,0.1); border-radius: 10px; margin-bottom: 20px; }

        .btn-order { background: #27ae60; color: white; border: none; padding: 8px; width: 90%; border-radius: 5px; cursor: pointer; font-weight: bold; margin-bottom: 10px; }
    </style>
</head>
<body>

<header>
    <h1>3D Factory Studio</h1>
    <p>Innovaci√≥n y Calidad en Impresi√≥n 3D</p>
</header>

<div class="main-content">
    
    <div class="catalog-area">
        <div id="viewer-container"></div>

        <h2>Productos en Stock</h2>
        <div class="catalog-grid" id="catalogGrid">
            <div class="product-card">
                <div class="image-placeholder">Foto Producto</div>
                <div style="padding: 15px;">
                    <h3>Figura Articulada</h3>
                    <p style="color: #27ae60; font-weight: bold;">$12.500</p>
                    <button class="btn-order" onclick="solicitarPedido('Figura Articulada')">Pedir por WhatsApp</button>
                </div>
            </div>
            <div class="product-card">
                <div class="image-placeholder">Foto Producto</div>
                <div style="padding: 15px;">
                    <h3>Soporte Gamer</h3>
                    <p style="color: #27ae60; font-weight: bold;">$8.500</p>
                    <button class="btn-order" onclick="solicitarPedido('Soporte Gamer')">Pedir por WhatsApp</button>
                </div>
            </div>
        </div>

        <hr style="margin: 40px 0; border: 0; border-top: 1px solid #ddd;">

        <h2>Trabajos Realizados</h2>
        <div class="gallery-grid">
            <div class="gallery-item">
                <div class="gallery-img-placeholder">Muestra Resina 4K</div>
                <div class="gallery-info">
                    <h4>Busto Coleccionista</h4>
                    <p>Detalle extremo en resina l√≠quida.</p>
                </div>
            </div>
            <div class="gallery-item">
                <div class="gallery-img-placeholder">Muestra Filamento Pro</div>
                <div class="gallery-info">
                    <h4>Engranaje Industrial</h4>
                    <p>Alta resistencia mec√°nica.</p>
                </div>
            </div>
        </div>

        <div class="custom-order-box">
            <h2>Pedidos Personalizados</h2>
            <p>¬øTienes un archivo propio? D√©janos los detalles aqu√≠:</p>
            <form id="customOrderForm">
                <div class="form-group">
                    <label>Nombre del Proyecto</label>
                    <input type="text" id="customName" placeholder="Ej: Casco Mandalorian" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Altura (cm)</label>
                        <input type="number" id="customSize" placeholder="cm">
                    </div>
                    <div class="form-group">
                        <label>Material</label>
                        <select id="customMaterial">
                            <option value="PLA">PLA (Pl√°stico est√°ndar)</option>
                            <option value="Resina">Resina (M√°ximo detalle)</option>
                            <option value="Flexible">TPU (Flexible)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Descripci√≥n / Link del modelo</label>
                    <textarea id="customDesc" rows="3" placeholder="Comenta colores o detalles..."></textarea>
                </div>
                <button type="button" class="btn-send-custom" onclick="enviarCotizacion()">
                    Enviar Cotizaci√≥n a WhatsApp
                </button>
            </form>
        </div>
    </div>

    <aside class="sidebar">
        <h3>Buscar</h3>
        <input type="text" id="productSearch" placeholder="¬øQu√© buscas?" onkeyup="filtrarProductos()" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd;">

        <h3>Categor√≠as</h3>
        <ul>
            <li><a href="#">üé¨ Cine y Series</a> <span class="category-tag">Nuevo</span></li>
            <li><a href="#">üéÆ Gaming y Cosplay</a></li>
            <li><a href="#">üè¢ Decoraci√≥n Oficina</a></li>
            <li><a href="#">üõ†Ô∏è Repuestos T√©cnicos</a></li>
            <li><a href="#">üé® Figuras para Pintar</a></li>
        </ul>

        <h3>Ventas Especiales</h3>
        <ul>
            <li><a href="#">üì¶ Pedidos al por Mayor</a></li>
            <li><a href="#">‚ú® Proyectos Personalizados</a></li>
            <li><a href="#">üéÅ Packs de Regalo</a></li>
        </ul>
    </aside>

</div>

<button class="theme-switch" onclick="toggleTheme()" id="themeBtn">üåô</button>

<script type="module">
    import * as THREE from 'https://unpkg.com/three@0.150.1/build/three.module.js';
    import { GLTFLoader } from 'https://unpkg.com/three@0.150.1/examples/jsm/loaders/GLTFLoader.js';
    import { OrbitControls } from 'https://unpkg.com/three@0.150.1/examples/jsm/controls/OrbitControls.js';

    const container = document.getElementById('viewer-container');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.set(0, 1, 5);

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    const ambientLight = new THREE.AmbientLight(0xffffff, 1);
    scene.add(ambientLight);

    const loader = new GLTFLoader();
    loader.load('https://threejs.org/examples/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf', (gltf) => {
        scene.add(gltf.scene);
        animate();
    });

    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
    }
</script>

<script>
    function filtrarProductos() {
        let input = document.getElementById('productSearch').value.toLowerCase();
        let tarjetas = document.getElementsByClassName('product-card');
        for (let t of tarjetas) {
            let titulo = t.querySelector('h3').innerText.toLowerCase();
            t.style.display = titulo.includes(input) ? "" : "none";
        }
    }

    function toggleTheme() {
        const doc = document.documentElement;
        const btn = document.getElementById('themeBtn');
        if (doc.getAttribute('data-theme') === 'dark') {
            doc.setAttribute('data-theme', 'light');
            btn.innerText = 'üåô';
        } else {
            doc.setAttribute('data-theme', 'dark');
            btn.innerText = '‚òÄÔ∏è';
        }
    }

    function solicitarPedido(p) {
        const url = `https://wa.me/569XXXXXXXX?text=Hola, me interesa el producto: ${p}`;
        window.open(url, '_blank');
    }

    function enviarCotizacion() {
        const nombre = document.getElementById('customName').value;
        const tamano = document.getElementById('customSize').value;
        const material = document.getElementById('customMaterial').value;
        const desc = document.getElementById('customDesc').value;

        if (!nombre) { alert("Indica al menos el nombre del proyecto"); return; }

        const texto = `üöÄ *COTIZACI√ìN PERSONALIZADA*%0A*Proyecto:* ${nombre}%0A*Tama√±o:* ${tamano}cm%0A*Material:* ${material}%0A*Notas:* ${desc}`;
        window.open(`https://wa.me/569XXXXXXXX?text=${texto}`, '_blank');
    }
</script>

</body>
</html>
